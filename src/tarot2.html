<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.7.1/vendors/jquery.easings.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jQuery-slimScroll/1.3.7/jquery.slimscroll.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.7.1/jquery.fullPage.min.js"></script>


    <link rel="stylesheet" type="text/css" href="../css/tarot2.css">
    <title>Document</title>
</head>
<body>
  <div id="fullpage">
    <div data-anchor="firstPage" class="section page1">
      <div class="text-center">
        <div class="logo"><img class="logo-img" src="../img/tarot/logo.png"><br><img src="../img/tarot/division.png" width="530px" height="55px"></div>
      <div class="card-container">
        <img id="card1" width="200px"><img id="card2">
      </div><br>
      <div class="descr" id="descr1"></div>
      </div>
      </div>

    <div data-anchor="secondPage" class="section">
      <div class="container-fluid text-center page2"><br>
        <p class="phrase p1">오늘 하루 고생한 당신에게</p>
        <p class="phrase p2">하루를 고생한 당신에게 추천해 주고싶은 맥주</p>
        <hr>
        <div class="left"><img id="oneBeerImg">
          <img src="../img/btn_heart.png" class="heart" >
          <img src="../img/btn_buy.png" class="buy" >
        </div>
        
        <div class="right">
          <div id="beerName"></div>
          <div class="descr" id="descr2">
        </div>
        </div>
        <br>

      <button type="button" class="btn btn-lg" onclick="goToHome()">홈으로 돌아가기</button>
      </div>
      
      

    </div>


    </div>




  <script src="../js/tarotContent.js"></script>
  <script>

  // fullPage.js controls
  $('#fullpage').fullpage({
	  scrollOverflow: true,
		sectionsColor: ['thistle', 'white'],
		afterLoad: function(index){
		  if(index === "secondPage") {
		    $(this).resize();
		  }
		}
  });

  $(document).ready(function() {
      $(".heart").click(function() {
        var currentImage = $(this).attr("src");
        console.log(currentImage);
        if (currentImage === "../img/btn_heart.png") {
          $(this).attr("src", "../img/btn_heart_checked.png");
          window.alert(beerName[uniqueNum] +"이(가) 즐겨찾기에 등록되었습니다.");
        } else {
          $(this).attr("src", "../img/btn_heart.png");
          window.alert(beerName[uniqueNum] +"이(가) 즐겨찾기에서 제거되었습니다.");
        }
      });
      $(".buy").click(function() {
        var currentImage = $(this).attr("src");
        console.log(currentImage);
        if (currentImage === "../img/btn_buy.png") {
          $(this).attr("src", "../img/btn_buy_checked.png");
          window.alert(beerName[uniqueNum] +"이(가) 장바구니에 추가되었습니다.");
        } else {
          $(this).attr("src", "../img/btn_buy.png");
          window.alert(beerName[uniqueNum] +"이(가) 장바구니에 제거되었습니다.");
        }
      });
    });

    var cardNums = 12;
    cardNums = Number(localStorage.getItem("cardNum"));
    console.log(cardNums);
    const uniqueNum = tarotCases.indexOf(String(cardNums));
    console.log(uniqueNum)
    const cardNum = [];
    cardNum[0] = Math.floor(cardNums/10); cardNum[1] = cardNums%10;
    const beerImgArr = ['beer17', 'beer4', 'beer3', 'beer7', 'beer9', 'beer21', 'beer16', 'beer10', 'beer11', 'beer1', 'beer15', 'beer19', 'beer20', 'beer2', 'beer6', 'beer14', 'beer18', 'beer22', 'beer4', 'beer8', 'beer21', 'beer20', 'beer1', 'beer22', 'beer4', 'beer2', 'beer7', 'beer22', 'beer3', 'beer19', 'beer21', 'beer16', 'beer6', 'beer2', 'beer19','beer4' ];
    /* 사진 불러오기 */
    var imgSrc = '../img/tarot/card'+cardNum[0]+'.jpg';
    $('#card1').attr("src", imgSrc);
    imgSrc = '../img/tarot/card'+cardNum[1]+'.jpg';
    $('#card2').attr("src", imgSrc);
    imgSrc = '../img/'+beerImgArr[uniqueNum]+'.png';  // 수정!!!!
    $('#oneBeerImg').attr("src", imgSrc);

    /* 글 불러오기 */
    $('#beerName').text(beerName[uniqueNum]);
    $('#descr1').text(tarotResultMsg[uniqueNum]);
    $('#descr2').text(beerResultMsg[uniqueNum]);

    function goToLogin() {
      document.location.href='./login.html';
    }
    function goToHome() {
      document.location.href='./main.html';
    }
    function shoppingBag() {
      window.alert("장바구니에 "+ beerName[uniqueNum] +"이(가) 담겼습니다.");
    }
  </script>
</body>
</html>